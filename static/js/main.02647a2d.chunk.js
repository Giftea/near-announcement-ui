(this["webpackJsonpnear-announcements-ui"]=this["webpackJsonpnear-announcements-ui"]||[]).push([[0],{179:function(e,t,n){},181:function(e,t){},193:function(e,t){},203:function(e,t){},248:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(69),a=n.n(o),i=n(44),s=(n(179),n(92),n(47)),l=n(83),u=n(13),d=n(19),j=n(89),b=n(7),h=n.n(b),p=n(37),x=1e14;var O=n(114),m=n(117),f=n(264),w=n(263),g=n(262),v=n(4);function k(e){var t=e.date;return Object(v.jsx)(w.a,{date:t,locale:"en-US"})}function S(e){var t=e/1e6,n=new Date-864e5,c=new Date(n);return new Date(t).toISOString()<c.toISOString()?Object(g.a)(new Date(t),"dd MMM yyyy"):Object(v.jsx)(k,{date:t})}function C(e){var t=e.item,n=e.account,c=e.likeFunc,r=e.dislikeFunc,o=e.deleteFunc;return Object(v.jsxs)(O.c,{width:{base:"340px",md:"450px"},borderWidth:"1px",borderRadius:"lg",overflow:"hidden",mb:2,mt:4,bg:"white",children:[Object(v.jsx)(m.a,{m:2,size:"lg",name:"".concat(t.announcer[0])})," ",Object(v.jsxs)(O.b,{p:4,flex:"1",children:[Object(v.jsxs)(O.b,{display:"flex",alignItems:"baseline",children:[Object(v.jsxs)(O.b,{display:"flex",flexDirection:"column",alignItems:"baseline",mr:"auto",children:[Object(v.jsx)(O.a,{textTransform:"lowercase",borderRadius:"full",px:"2",colorScheme:"teal",children:t.announcer}),Object(v.jsxs)(O.b,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",children:[S(t.createdAt)," \u2022"]})]}),n!==t.announcer?null:Object(v.jsx)(O.b,{color:"gray.500",fontWeight:"semibold",letterSpacing:"wide",fontSize:"xs",ml:"2",cursor:"pointer",_hover:{color:"red"},children:Object(v.jsx)(f.a,{onClick:o})})]}),Object(v.jsx)(O.e,{mt:"1",lineHeight:"tight",color:"black",textAlign:"left",fontSize:18,children:t.text}),Object(v.jsx)(O.c,{justify:"flex-end",alignItems:"baseline",py:"2",children:Object(v.jsxs)(O.c,{color:"gray.500",ml:"2",children:[Object(v.jsx)(O.c,{cursor:"pointer",mx:"5px",variant:"ghost",onClick:c,children:Object(v.jsxs)(O.b,{mr:"2px",_hover:{color:"blue"},children:[t.like.length," like"]})})," ",Object(v.jsx)(O.c,{cursor:"pointer",mx:"5px",variant:"ghost",onClick:r,children:Object(v.jsxs)(O.b,{mr:"2px",_hover:{color:"blue"},children:[t.dislike.length," dislike"]})})]})})]})]})}var A=n(11),y=n(118),I=n(138),N=n(82),E=n(119),_=n(90);var U=function(){var e=Object(A.d)(),t=e.isOpen,n=e.onOpen,r=e.onClose,o=Object(c.useRef)();function a(e){var t;return e?""===e.toLowerCase()?t="Jeez! Enter an announcment YO!! \ud83d\ude31":e.length<5&&(t="Come on! More words \ud83d\ude09"):t="Jeez! Enter an announcment YO!! \ud83d\ude31",t}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(y.a,{borderRadius:"full",colorScheme:"blue",mt:4,onClick:n,children:"Create Announcement"}),Object(v.jsxs)(I.a,{finalFocusRef:o,isOpen:t,onClose:r,children:[Object(v.jsx)(I.f,{}),Object(v.jsxs)(I.d,{children:[Object(v.jsx)(I.e,{children:"Create Announcement"}),Object(v.jsx)(I.c,{}),Object(v.jsx)(I.b,{children:Object(v.jsx)(_.c,{initialValues:{text:""},onSubmit:function(e,t){setTimeout(Object(d.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c=e,window.contract.createAnnouncement(c,x,Object(p.parseNearAmount)("0.52"));case 2:alert(JSON.stringify(e,null,2)),t.setSubmitting(!1);case 4:case"end":return n.stop()}var c}),n)}))),1e3)},children:function(e){return Object(v.jsxs)(_.b,{children:[Object(v.jsx)(_.a,{name:"text",validate:a,children:function(e){var t=e.field,n=e.form;return Object(v.jsxs)(N.a,{isInvalid:n.errors.text&&n.touched.text,children:[Object(v.jsx)(E.a,Object(s.a)(Object(s.a)({},t),{},{id:"text",placeholder:"Tell the community"})),Object(v.jsx)(N.b,{children:n.errors.text})]})}}),Object(v.jsxs)(O.c,{justify:"flex-end",children:[Object(v.jsx)(y.a,{mt:4,mr:3,colorScheme:"teal",isLoading:e.isSubmitting,type:"submit",children:"Submit"}),Object(v.jsx)(y.a,{colorScheme:"red",mt:4,mr:3,onClick:r,children:"Close"})]})]})}})})]})]})]})},T=n(61),D=n(78),R=n(139),F=n.p+"static/media/logo.4fb17f30.png",H=Object({NODE_ENV:"production",PUBLIC_URL:"/near-announcement-ui",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"dev-1651428809093-16954528884263";var W=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:H,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.mainnet.near.org"};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:H,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:H,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org",explorerUrl:"https://explorer.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/near-announcement-ui",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:H};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:H,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:H,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}},M=n(70),P=W("testnet");function z(){return(z=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.connect)(Object.assign({deps:{keyStore:new M.keyStores.BrowserLocalStorageKeyStore}},P));case 2:t=e.sent,window.walletConnection=new M.WalletConnection(t),window.accountId=window.walletConnection.getAccountId(),window.contract=new M.Contract(window.walletConnection.account(),P.contractName,{viewMethods:["getAnnouncements"],changeMethods:["like","dislike","createAnnouncement","deleteAnnouncement"]});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p.formatNearAmount,e.next=3,window.walletConnection.account().getAccountBalance();case 3:return e.t1=e.sent.total,e.abrupt("return",(0,e.t0)(e.t1,2));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){window.walletConnection.requestSignIn(P.contractName),window.walletConnection.requestSignIn(P.contractName,"Near Announcement")}function J(){window.walletConnection.signOut(),window.location.reload(),window.location.replace("/near-announcement-ui/#/")}function V(e){var t=e.logout,n=Object(c.useState)("0"),r=Object(j.a)(n,2),o=r[0],a=r[1],i=window.walletConnection.account(),s=Object(c.useCallback)(Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.accountId){e.next=6;break}return e.t0=a,e.next=4,K();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))));return Object(c.useEffect)((function(){s()}),[s]),Object(v.jsxs)(O.c,{bg:"beige",w:"full",children:[Object(v.jsx)(O.d,{href:"/near-announcement-ui",textDecoration:"none",mr:"auto",children:Object(v.jsx)(D.a,{src:F,h:"50px",w:"50px",ml:"20px"})}),Object(v.jsx)(O.b,{children:Object(v.jsxs)(R.a,{children:[Object(v.jsxs)(R.b,{colorScheme:"teal",as:y.a,rightIcon:Object(v.jsx)(T.b,{}),m:"8px 18px 8px 8px",children:["\u24c3 ",o]}),Object(v.jsxs)(R.d,{children:[Object(v.jsxs)(R.c,{minH:"48px",children:[Object(v.jsx)(m.a,{m:2,size:"xs",name:"".concat(i.accountId[0]),mr:"12px"}),Object(v.jsx)("span",{style:{color:"#000"},children:i.accountId})]}),Object(v.jsx)(R.c,{minH:"40px",children:Object(v.jsx)("span",{style:{color:"#000",textAlign:"center",width:"83%"},onClick:function(){return t()},children:"Disconnect"})})]})]})})]})}var q=function(e){var t=e.logout,n=window.walletConnection.account().accountId,r=Object(c.useState)([]),o=Object(j.a)(r,2),a=o[0],i=o[1],s=Object(u.f)(),l=Object(c.useCallback)(Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n||s.push("/");case 1:case"end":return e.stop()}}),e)}))),[n]);Object(c.useEffect)((function(){l()}),[l]);var b=Object(c.useCallback)(Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.t0=i,e.next=4,window.contract.getAnnouncements();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))));Object(c.useEffect)((function(){b()}),[]);var m=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={uid:t},window.contract.dislike(n,x,Object(p.parseNearAmount)("0.0001"));case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={uid:t},window.contract.like(n,x,Object(p.parseNearAmount)("0.0001"));case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={uid:t},window.contract.deleteAnnouncement(n,x,Object(p.parseNearAmount)("0.0001"));case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(V,{logout:t}),Object(v.jsx)(U,{}),null===a||void 0===a?void 0:a.sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})).map((function(e,t){return Object(v.jsx)(C,{item:e,account:n,likeFunc:function(){return f(e.uid)},dislikeFunc:function(){return m(e.uid)},deleteFunc:function(){return w(e.uid)}},t)})),(null===a||void 0===a?void 0:a.length)<1&&Object(v.jsxs)(O.c,{flexDirection:"column",mt:"30px",children:[Object(v.jsx)(D.a,{h:"300px",w:"300px",src:F}),Object(v.jsx)(O.e,{children:"No annoucnements"})]})]})};function Y(e){var t=e.rightIcon,n=e.colorScheme,c=e.variant,r=e.onClick,o=e.children;return Object(v.jsx)(y.a,{rightIcon:t,colorScheme:n,variant:c,onClick:r,children:o})}var G=n.p+"static/media/home.dc2a44c9.png",Q=function(e){var t=e.logout,n=e.login,r=window.walletConnection.account().accountId,o=Object(u.f)(),a=Object(c.useCallback)(Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&o.push("/announcements");case 1:case"end":return e.stop()}}),e)}))));return Object(c.useEffect)((function(){a()}),[]),Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("img",{src:G,className:"App-logo",alt:"logo"}),Object(v.jsx)(O.e,{className:"App-link",target:"_blank",rel:"noopener noreferrer",children:"Near Announcements"}),r?Object(v.jsxs)(O.c,{flexDirection:"column",children:[Object(v.jsx)(O.d,{href:"/announcements",children:"Go to Announcements"}),Object(v.jsx)(Y,{rightIcon:Object(v.jsx)(T.c,{}),colorScheme:"red",variant:"solid",onClick:function(){return t()},mt:"1.5rem",children:"Disconnect"})]}):Object(v.jsx)(Y,{rightIcon:Object(v.jsx)(T.a,{}),colorScheme:"teal",variant:"solid",onClick:function(){return n()},children:"Connect"})]})})},X=function(e){var t=e.logout,n=e.login;return Object(v.jsx)(l.a,{children:Object(v.jsxs)(u.c,{children:[Object(v.jsx)(u.a,{exact:!0,path:"/",render:function(e){return Object(v.jsx)(Q,Object(s.a)(Object(s.a)({},e),{},{logout:t,login:n}))}}),Object(v.jsx)(u.a,{path:"/announcements",render:function(e){return Object(v.jsx)(q,Object(s.a)(Object(s.a)({},e),{},{logout:t}))}})]})})};var Z=function(e){var t=e.logout,n=e.login;return Object(v.jsx)("div",{children:Object(v.jsx)(X,{logout:t,login:n})})},$=n(261),ee=n(144),te=n(145);$.a.locale(ee),$.a.locale(te),window.nearInitPromise=function(){return z.apply(this,arguments)}().then((function(){a.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(Z,{login:B,logout:J})})}),document.getElementById("root"))})).catch(console.error)},92:function(e,t,n){}},[[248,1,2]]]);
//# sourceMappingURL=main.02647a2d.chunk.js.map